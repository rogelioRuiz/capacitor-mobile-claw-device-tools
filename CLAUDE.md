# CLAUDE.md — AI-Assisted Development Context

This file provides context for AI coding assistants working on this codebase.

## Project Overview

`capacitor-mobile-claw-device-tools` is an npm package that exports 64+ MCP-compliant device tools for the `capacitor-mobile-claw` AI agent framework. Each tool wraps a Capacitor plugin capability (camera, SSH, Bluetooth, GPS, etc.) and exposes it to the AI agent via the Model Context Protocol.

## Repository Structure

```
src/
  index.ts              # Package entry — exports allDeviceTools, categories, types
  types.ts              # DeviceTool interface definition
  categories.ts         # 24 tool categories in 5 sections for Settings UI
  tools/
    index.ts            # Aggregates all tool arrays
    ssh.tools.ts        # SSH: connect, exec, disconnect
    sftp.tools.ts       # SFTP: list, download, upload
    http.tools.ts       # HTTP requests
    tcp.tools.ts        # TCP: connect, send, read, disconnect
    udp.tools.ts        # UDP: send, broadcast
    discovery.tools.ts  # ping, network_scan, mdns_discover
    wol.tools.ts        # Wake-on-LAN
    camera.tools.ts     # take_photo, pick_image
    barcode.tools.ts    # barcode_scan, is_supported
    motion-sensors.tools.ts  # acceleration, orientation
    geolocation.tools.ts     # get_current
    speech.tools.ts     # listen, is_available, get_languages
    tts.tools.ts        # speak, get_languages
    bluetooth.tools.ts  # scan, connect, read, write, disconnect
    nfc.tools.ts        # read, write, is_supported
    contacts.tools.ts   # list, search
    health.tools.ts     # is_available, request_auth, query
    biometric.tools.ts  # authenticate, is_available
    device-info.tools.ts     # get_info, get_battery
    clipboard.tools.ts  # read, write
    haptics.tools.ts    # impact, notification, vibrate
    notifications.tools.ts   # schedule, cancel
    push-notifications.tools.ts  # get_token, get_delivered
    network-status.tools.ts  # network_status
    share.tools.ts      # share_content
    secure-storage.tools.ts  # get, set, remove
    keep-awake.tools.ts      # keep_awake, allow_sleep
    app-state.tools.ts       # get_info, get_state
plugins/
  capacitor-network-tools/ # Bundled Capacitor native plugin (SSH, SFTP, TCP, UDP, etc.)
    src/                   # TypeScript definitions and web fallback
    android/               # Kotlin native implementation (JSch, OkHttp)
    ios/                   # Swift native implementation (NMSSH, Network.framework)
```

## Build & Lint Commands

```bash
npm run build           # TypeScript → dist/esm/
npm run build:watch     # Build in watch mode
npm run typecheck       # tsc --noEmit
npm run lint            # Biome check
npm run lint:fix        # Biome auto-fix
```

## DeviceTool Pattern

Every tool file exports a `DeviceTool[]` array. Each tool has:

```typescript
{
  name: 'tool_name',              // unique snake_case identifier
  description: 'What it does',    // shown to AI agent
  inputSchema: { ... },           // JSON Schema for parameters
  execute: async (args) => { ... } // implementation
}
```

Most tools use dynamic imports (`await import(...)`) to lazy-load Capacitor plugins.

## Coding Conventions

- TypeScript strict mode, ES2022 target, ESNext modules
- No semicolons, single quotes, trailing commas
- 2 spaces indentation, 120 char line width
- Biome for linting and formatting (`biome.json`)
- Conventional commits with scopes: `tools`, `categories`, `docs`, `ci`, `deps`

## Files to Never Modify Directly

- `dist/` — generated by `tsc`
- `node_modules/` — managed by npm
- `plugins/capacitor-network-tools/android/` — native Android code (edit only if modifying network plugin)
- `plugins/capacitor-network-tools/ios/` — native iOS code (edit only if modifying network plugin)

## Common Tasks

- **Add a device tool**: Create `src/tools/<name>.tools.ts`, register in `src/tools/index.ts`, add category in `src/categories.ts`
- **Add a category section**: Edit the `mcpCategorySections` array in `src/categories.ts`
- **Format code**: `npm run lint:fix`
